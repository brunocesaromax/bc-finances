spring:
  application:
    name: bc-finances-backend
  profiles:
    active: dev
  jpa:
    database: POSTGRESQL
    show-sql: false
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
  jackson:
    deserialization:
      fail-on-unknown-properties: true
  flyway:
    locations: classpath:db/migration
    out-of-order: true
    baseline-on-migrate: true

management:
  tracing:
    enabled: true
    sampling:
      probability: ${OTEL_SAMPLING_PROBABILITY:1.0}
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: never
  metrics:
    distribution:
      percentiles-histogram:
        http.server.requests: true
      percentiles:
        http.server.requests: 0.5, 0.9, 0.95, 0.99

logging:
  level:
    root: INFO
  pattern:
    correlation: '[${spring.application.name:bc-finances-backend},%X{trace_id:-},%X{span_id:-}] '

otel:
  sdk:
    disabled: ${OTEL_SDK_DISABLED:false}
  exporter:
    otlp:
      endpoint: ${OTEL_EXPORTER_OTLP_ENDPOINT:http://localhost:5080/api/${OPENOBSERVE_ORG:default}}
      protocol: http/protobuf
      headers:
        Authorization: ${OTEL_EXPORTER_OTLP_HEADER_AUTHORIZATION:Basic OTEL_HEADER_AUTHORIZATION}
        stream-name: ${OPENOBSERVE_STREAM:bcfinances}
      compression: gzip
  service:
    name: bc-finances-backend
  resource:
    attributes:
      service.name: bc-finances-backend
      service.namespace: bcfinances
      service.version: @project.version@
      deployment.environment: ${SPRING_PROFILES_ACTIVE:dev}
      host.name: ${HOSTNAME:local}
  traces:
    exporter: otlp
    sampler: always_on
  metrics:
    exporter: otlp
  logs:
    exporter: otlp
  instrumentation:
    common:
      default-enabled: true
    spring-webmvc:
      enabled: true
    spring-web:
      enabled: true
    jdbc:
      enabled: true
    micrometer:
      enabled: true
    annotations:
      enabled: true
  propagators:
    - tracecontext
    - baggage
