server:
  port: 8080

spring:
  application:
    name: bc-finances-backend
  jpa:
    database: POSTGRESQL
    show-sql: false
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
  jackson:
    deserialization:
      fail-on-unknown-properties: true
  datasource:
    url: ${DB_URL:DB_URL}
    username: ${DB_USERNAME:DB_USERNAME}
    password: ${DB_PASSWORD:DB_PASSWORD}
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:REDIS_PASSWORD}
  flyway:
    locations: classpath:db/migration
    out-of-order: true
    baseline-on-migrate: true
    validate-on-migrate: false

management:
  tracing:
    enabled: true
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: never
  metrics:
    distribution:
      percentiles-histogram:
        http.server.requests: true
      percentiles:
        http.server.requests: 0.5, 0.9, 0.95, 0.99

logging:
  level:
    root: INFO
  pattern:
    correlation: '[${spring.application.name:bc-finances-backend},%X{trace_id:-},%X{span_id:-}] '

otel:
  sdk:
    disabled: false
  exporter:
    otlp:
      endpoint: ${OTEL_EXPORTER_OTLP_ENDPOINT:http://localhost:5080/api/${OPENOBSERVE_ORG:default}}
      protocol: http/protobuf
      headers:
        Authorization: ${OTEL_EXPORTER_OTLP_HEADER_AUTHORIZATION:Basic OTEL_HEADER_AUTHORIZATION}
        stream-name: ${OPENOBSERVE_STREAM:bcfinances}
      compression: gzip
  service:
    name: bc-finances-backend
  resource:
    attributes:
      service.name: bc-finances-backend
      service.namespace: bcfinances
      service.version: @project.version@
      deployment.environment: dev
      host.name: local
  traces:
    exporter: otlp
  metrics:
    exporter: otlp
  logs:
    exporter: otlp
  instrumentation:
    common:
      default-enabled: true
    spring-webmvc:
      enabled: true
    spring-web:
      enabled: true
    jdbc:
      enabled: true
    micrometer:
      enabled: true
    annotations:
      enabled: true
  propagators:
    - tracecontext
    - baggage

bc-finances:
  origin-permitted: http://localhost:5173
  i18n:
    cache-seconds: 0
  mail:
    host: ${MAIL_HOST:MAIL_HOST}
    port: ${MAIL_PORT:MAIL_PORT}
    username: ${MAIL_USERNAME:MAIL_USERNAME}
    password: ${MAIL_PASSWORD:MAIL_PASSWORD}
  s3:
    access-key-id: ${AWS_S3_ACCESS_KEY_ID:AWS_S3_ACCESS_KEY_ID}
    secret-access-key: ${AWS_S3_SECRET_ACCESS_KEY:AWS_S3_SECRET_ACCESS_KEY}
    bucket: ${AWS_S3_BUCKET:AWS_S3_BUCKET}
    endpoint: ${AWS_S3_ENDPOINT:http://localhost:4566}
    public-endpoint: ${AWS_S3_PUBLIC_ENDPOINT:http://localhost:4566}
    region: ${AWS_S3_REGION:us-east-1}
